apiVersion: v1
kind: ConfigMap
metadata:
  name: prowlarr-config
data:
  config.yml: |
    prowlarr:
      server:
        address: prowlarr/prowlarr
        port: 80
      {{- $sonarrSecret := (lookup "v1" "Secret" .Release.Namespace "sonarr-config-secret") | default dict }}
      {{- if $sonarrSecret }}
      {{- $sonarrData := (get $sonarrSecret "data")}}
      applications:
      - syncLevel: fullSync
        name: Sonarr
        fields:
        - order: 0
          name: prowlarrUrl
          value: http://prowlarr/prowlarr
        - order: 1
          name: baseUrl
          value: http://sonarr/sonarr
        - order: 2
          name: apiKey
          value: {{ $sonarrData.apiKey | b64dec }}
        implementationName: Sonarr
        implementation: Sonarr
        configContract: SonarrSettings
        infoLink: https://wiki.servarr.com/prowlarr/supported#sonarr
        tags: []
        id: 0
      {{- end }}
      indexer:
        - definitionName: 1337x
          enable: true
          sortName: 1337x
          name: 1337x
          fields:
            - order: 0
              name: definitionFile
              value: 1337x
            - order: 1
              name: baseUrl
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          infoLink: https://wiki.servarr.com/prowlarr/supported-indexers#1337x
          tags: []
          id: 0
        - definitionName: badasstorrents
          enable: true
          sortName: badass torrents
          name: Badass Torrents
          fields:
            - order: 0
              name: definitionFile
              value: badasstorrents
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - definitionName: eztv
          enable: true
          sortName: eztv
          name: EZTV
          fields:
            - order: 0
              name: definitionFile
              value: eztv
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - definitionName: glodls
          enable: true
          sortName: glodls
          name: GloDLS
          fields:
            - order: 0
              name: definitionFile
              value: glodls
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - enable: true
          sortName: internet archive
          name: Internet Archive
          fields:
            - order: 0
              name: definitionFile
              value: internetarchive
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - sortName: kickasstorrents to
          name: kickasstorrents.to
          fields:
            - order: 0
              name: definitionFile
              value: kickasstorrents-to
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - definitionName: limetorrents
          enable: true
          sortName: limetorrents
          name: LimeTorrents
          fields:
            - order: 0
              name: definitionFile
              value: limetorrents
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - definitionName: linuxtracker
          enable: true
          sortName: linuxtracker
          name: LinuxTracker
          fields:
            - order: 0
              name: definitionFile
              value: linuxtracker
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - definitionName: thepiratebay
          sortName: pirate bay
          name: The Pirate Bay
          fields:
            - order: 0
              name: definitionFile
              value: thepiratebay
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
        - definitionName: yts
          enable: true
          sortName: yts
          name: YTS
          fields:
            - order: 0
              name: definitionFile
              value: yts
          implementationName: Cardigann
          implementation: Cardigann
          configContract: CardigannSettings
          id: 0
      indexerproxy:
        - id: 0
          onHealthIssue: false
          supportsOnHealthIssue: false
          includeHealthWarnings: false
          name: FlareSolverr
          fields:
            - order: 0
              name: host
              label: Host
              value: http://flaresolverr:8191/
              type: textbox
              advanced: false
            - order: 1
              name: requestTimeout
              label: Request Timeout
              unit: seconds
              helpText: FlareSolverr maxTimeout Request Parameter
              value: 60
              type: textbox
              advanced: true
          implementationName: FlareSolverr
          implementation: FlareSolverr
          configContract: FlareSolverrSettings
          infoLink: https://wiki.servarr.com/prowlarr/supported#flaresolverr
          tags: []